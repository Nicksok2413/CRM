{% extends "_base.html" %}

{% block content %}
<h2 class="fw-bold">Детальная информация о лиде</h2>
<div class="row bg-white px-3 py-3 mx-2 my-5 rounded pb-5 shadow-lg">
    <div class="hstack gap-3 pb-4">
        <a href="{% url 'leads:list' %}" class="btn btn-success p-2">К списку лидов</a>
    </div>
    <div class="col"></div>
    <div class="col">
        <div class="card border-dark shadow" style="background: #eee">
            <div class="card-body">
                <h5 class="card-title fw-bold">{{ object.last_name }} {{ object.first_name }}</h5>
                <p class="card-text">{{ object.phone }}</p>
                <p style="align: right; color: yellow;">{{ object.status }}</p>
                <div class="d-flex justify-content-end fw-bold">e-mail: {{ object.email }}</div>

                <div class="d-flex justify-content-center mt-4 fw-bold">

                    {% if perms.leads.change_potentialclient %}
                        <a href="{% url 'leads:edit' object.pk %}" class="btn btn-primary">Редактировать</a>
                    {% endif %}

                    <hr>
                    <h5 class="text-center mt-4">Изменить статус</h5>

                    <div class="d-flex justify-content-center gap-2 mt-3">
                        {% if perms.leads.change_potentialclient %}
                            <form method="post" action="{% url 'leads:update_status' pk=object.pk status='IN_PROGRESS' %}">
                                {% csrf_token %}
                                <button type="submit" class="btn btn-warning btn-sm">Взять в работу</button>
                            </form>
                            <form method="post" action="{% url 'leads:update_status' pk=object.pk status='LOST' %}">
                                {% csrf_token %}
                                <button type="submit" class="btn btn-secondary btn-sm">Клиент потерян</button>
                            </form>
                        {% endif %}
                    </div>

                </div>

                <div class="d-flex justify-content-center fw-bold" style="padding-top: 10px;">
                    {% if perms.leads.delete_potentialclient %}
                        <a href="{% url 'leads:delete' object.pk %}" class="btn btn-danger">Удалить</a>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
    <div class="col"></div>
</div>
{% endblock %}